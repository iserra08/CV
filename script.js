const translations = {
    es: {
        title: "Auxiliar Inform谩tico",
        contactBtn: "Cont谩ctame",
        aboutTitle: "Sobre M铆",
        ageLabel: "Edad",
        ageValue: "17 a帽os",
        locationLabel: "Ubicaci贸n",
        locationValue: "Barcelona, Espa帽a",
        languagesLabel: "Idiomas",
        languagesValue: "Castellano*, Catal谩n, Ingl茅s",
        aboutText: "T茅cnico en formaci贸n en el 谩mbito de sistemas microinform谩ticos y redes, con experiencia pr谩ctica en mantenimiento de equipos y gesti贸n b谩sica de redes y servicios. Me parece que destaco por mi capacidad y por mi inter茅s constante en aprender y aplicar nuevas tecnolog铆as. He participado en diversos proyectos reales, desde configuraci贸n de servidores y herramientas online hasta peque帽as automatizaciones, lo que me ha permitido desarrollar un enfoque pr谩ctico y orientado a soluciones.",
        experienceTitle: "Experiencia",
        exp1Date: "2025 - actualmente",
        exp1Title: "Becario inform谩tico",
        exp1Desc: "Pr谩cticas duales de 515h",
        exp2Date: "2023 - 2025",
        exp2Title: "Inform谩tico personal",
        exp2Desc: "Formaci贸n a gente mayor y ayuda con tareas inform谩ticas",
        educationTitle: "Formaci贸n",
        edu1Title: "Sistemas MicroInform谩ticos y Redes",
        edu1Year: "2024 - Actualmente",
        edu2Title: "Educaci贸n Secundaria Obligatoria",
        skillsTitle: "Habilidades",
        skill1: "Soporte inform谩tico",
        skill2: "Administraci贸n de sistemas",
        skill3: "Gesti贸n de software y herramientas",
        skill4: "Programaci贸n",
        skill5: "Soporte a usuarios",
        skill6: "Resoluci贸n de problemas",
        projectsTitle: "Proyectos Personales",
        proj1Title: "Servidor de Minecraft",
        proj1Desc: "Configuraci贸n y gesti贸n de servidores de Minecraft. Incluyendo plugins, automatizaciones y minijuegos.",
        projectUnavailable: " No disponible",
        proj2Title: "Web de Extensiones",
        proj2Desc: "Elaboraci贸n de una p谩gina web, sobre extensiones de archivos, comandos y m谩s...",
        viewProject: "Ver Proyecto",
        contactTitle: "Contacto",
        phoneLabel: "Tel茅fono",
        rights: "Todos los derechos reservados.",
        // Sidebar
        navHome: "Inicio",
        navAbout: "Sobre M铆",
        navExp: "Experiencia",
        navEdu: "Formaci贸n",
        navSkills: "Habilidades",
        navProj: "Proyectos",
        navContact: "Contacto",
        // Skills Categories
        skillCatProg: "Programaci贸n",
        skillCatSysAdmin: "Administraci贸n de Sistemas",
        skillCatTools: "Herramientas y Software",
        skillCatSupport: "Soporte y Resoluci贸n",
        skillDescTools: "Gesti贸n de software, ofim谩tica, herramientas de soporte.",
        skillDescSupport: "Soporte a usuarios, resoluci贸n de incidencias, mantenimiento.",
        // Education
        visitCenter: "Visitar Centro"
    },
    ca: {
        title: "Auxiliar Informtic",
        contactBtn: "Contacta'm",
        aboutTitle: "Sobre Mi",
        ageLabel: "Edat",
        ageValue: "17 anys",
        locationLabel: "Ubicaci贸",
        locationValue: "Barcelona, Espanya",
        languagesLabel: "Idiomes",
        languagesValue: "Castell*, Catal, Angl猫s",
        aboutText: "T猫cnic en formaci贸 en l'mbit de sistemes microinformtics i xarxes, amb experi猫ncia prctica en manteniment d'equips i gesti贸 bsica de xarxes i serveis. Em sembla que destaco per la meva capacitat i pel meu inter猫s constant a aprendre i aplicar noves tecnologies. He participat en diversos projectes reals, des de configuraci贸 de servidors i eines en l铆nia fins a petites automatitzacions, la qual cosa m'ha perm猫s desenvolupar un enfocament prctic i orientat a solucions.",
        experienceTitle: "Experi猫ncia",
        exp1Date: "2025 - actualment",
        exp1Title: "Becari informtic",
        exp1Desc: "Prctiques duals de 515h",
        exp2Date: "2023 - 2025",
        exp2Title: "Informtic personal",
        exp2Desc: "Formaci贸 a gent gran i ajuda amb tasques informtiques",
        educationTitle: "Formaci贸",
        edu1Title: "Sistemes Microinformtics i Xarxes",
        edu1Year: "2024 - Actualment",
        edu2Title: "Educaci贸 Secundria Obligat貌ria",
        skillsTitle: "Habilitats",
        skill1: "Suport informtic",
        skill2: "Administraci贸 de sistemes",
        skill3: "Gesti贸 de programari i eines",
        skill4: "Programaci贸",
        skill5: "Suport a usuaris",
        skill6: "Resoluci贸 de problemes",
        projectsTitle: "Projectes Personals",
        proj1Title: "Servidor de Minecraft",
        proj1Desc: "Configuraci贸 i gesti贸 de servidors de Minecraft. Incloent plugins, automatitzacions i minijocs.",
        projectUnavailable: " No disponible",
        proj2Title: "Web d'Extensions",
        proj2Desc: "Elaboraci贸 d'una pgina web, sobre extensions d'arxius, comandes i m茅s...",
        viewProject: "Veure Projecte",
        contactTitle: "Contacte",
        phoneLabel: "Tel猫fon",
        rights: "Tots els drets reservats."
    },
    en: {
        title: "IT Assistant",
        contactBtn: "Contact Me",
        aboutTitle: "About Me",
        ageLabel: "Age",
        ageValue: "17 years old",
        locationLabel: "Location",
        locationValue: "Barcelona, Spain",
        languagesLabel: "Languages",
        languagesValue: "Spanish*, Catalan, English",
        aboutText: "Technician in training in the field of microinformatics systems and networks, with practical experience in equipment maintenance and basic management of networks and services. It seems to me that I stand out for my ability and my constant interest in learning and applying new technologies. I have participated in several real projects, from server configuration and online tools to small automations, which has allowed me to develop a practical and solution-oriented approach.",
        experienceTitle: "Experience",
        exp1Date: "2025 - present",
        exp1Title: "IT Intern",
        exp1Desc: "Dual internship of 515h",
        exp2Date: "2023 - 2025",
        exp2Title: "Personal IT Support",
        exp2Desc: "Training for elderly people and help with IT tasks",
        educationTitle: "Education",
        edu1Title: "Microcomputer Systems and Networks",
        edu1Year: "2024 - Present",
        edu2Title: "Compulsory Secondary Education",
        skillsTitle: "Skills",
        skill1: "IT Support",
        skill2: "Systems Administration",
        skill3: "Software & Tools Management",
        skill4: "Programming",
        skill5: "User Support",
        skill6: "Problem Solving",
        projectsTitle: "Personal Projects",
        proj1Title: "Minecraft Server",
        proj1Desc: "Configuration and management of Minecraft servers. Including plugins, automations, and minigames.",
        projectUnavailable: " Not available",
        proj2Title: "Extensions Web",
        proj2Desc: "Creation of a website about file extensions, commands and more...",
        viewProject: "View Project",
        contactTitle: "Contact",
        phoneLabel: "Phone",
        rights: "All rights reserved."
    }
};

document.addEventListener('DOMContentLoaded', () => {

    const langBtns = document.querySelectorAll('.lang-btn');

    function calculateAge(birthDate) {
        const today = new Date();
        const birth = new Date(birthDate);
        let age = today.getFullYear() - birth.getFullYear();
        const m = today.getMonth() - birth.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birth.getDate())) {
            age--;
        }
        return age;
    }

    const myAge = calculateAge('2008-02-13');

    // Update translations with dynamic age
    translations.es.ageValue = `${myAge} a帽os`;
    translations.ca.ageValue = `${myAge} anys`;
    translations.en.ageValue = `${myAge} years old`;

    langBtns.forEach(btn => {
        btn.addEventListener('click', () => {

            langBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');


            const lang = btn.getAttribute('data-lang');


            updateLanguage(lang);
        });
    });

    function updateLanguage(lang) {
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                element.textContent = translations[lang][key];
            }
        });





        document.documentElement.lang = lang;
    }





    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });





    const observerOptions = {
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);





    const sections = document.querySelectorAll('.section');
    const cards = document.querySelectorAll('.card, .about-card, .timeline-item');

    sections.forEach(section => {
        section.classList.add('fade-in-section');
        observer.observe(section);
    });

    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
        observer.observe(card);
    });





    const cardObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
                cardObserver.unobserve(entry.target);
            }
        });
    }, observerOptions);

    cards.forEach(card => cardObserver.observe(card));

    // Scroll Spy for Sidebar
    const navLinks = document.querySelectorAll('.nav-link');
    const sectionsSpy = document.querySelectorAll('section, header');

    const spyOptions = {
        rootMargin: '-30% 0px -60% 0px', // Active zone is near the top
        threshold: 0
    };

    const spyObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const id = entry.target.getAttribute('id');
                // Remove active class from all links
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${id}`) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }, spyOptions);

    sectionsSpy.forEach(section => {
        if (section) spyObserver.observe(section);
    });

    // Mobile Menu Toggle
    const menuToggle = document.getElementById('menu-toggle');
    const sidebar = document.getElementById('sidebar');

    if (menuToggle) {
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });
    }

    // Close sidebar when clicking a link (mobile)
    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('active');
            }
        });
    });

    // Close sidebar when clicking outside
    document.addEventListener('click', (e) => {
        if (window.innerWidth <= 768 &&
            sidebar.classList.contains('active') &&
            !sidebar.contains(e.target) &&
            !menuToggle.contains(e.target)) {
            sidebar.classList.remove('active');
        }
    });

});
